<!DOCTYPE html>
<html>
<head>
	<title>Custumer</title>
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/izimodal/1.5.1/js/iziModal.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/izimodal/1.5.1/css/iziModal.min.css">
	<link rel="stylesheet" type="text/css" href="main.css">

	
</head>
<body onload="myFunction()" class="Custumer">
<div class="navbar">
	<div class="position">
  <a href="index.html">Home</a>
  <a href="#news">News</a>
  <div class="dropdown">
    <button class="dropbtn">Menu
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="custumer.html">Customers</a>
    </div>
  </div>
 </div>
</div>
 
<button data-izimodal-open="#modal" data-izimodal-transitionin="fadeInDown" class="myButton">Add</button>
<div id="modal" class="modal">
<br>
<label>First name:</label>	
<input type="text" name="fname" id="fname"><br><br>
<label>Last name:</label>
<input type="text" name="lname" id=lname><br><br>
<label>Age:</label>
<input type="number" name="age" id="age" min="1" style="margin-left: 41px;"><br>
<button onclick="addRow()" class="myButton" style="float: right; margin-right: 18px;" >Add</button>
</div>

<button id="ChangeModal" onclick="CheckCehange()" data-izimodal-open="#modal1" data-izimodal-transitionin="fadeInDown" class="myButton">Change</button>
<div id="modal1" class="modal1" style="display: none;">
<br>
<!-- <label>Id:</label>	
<input type="number" name="Id" id="cusid1" min="1" style="margin-left: 53px;" ><br><br> -->
<label>First name:</label>
<input type="text" name="fname" id="fname1"><br><br>
<label>Last name:</label>
<input type="text" name="lname" id=lname1><br><br>
<label>Age:</label>
<input type="number" name="age" id="age1" min="1" style="margin-left: 41px;"><br>
<button onclick="ChangeRow()" class="myButton" style="float: right; margin-right: 18px;" >Change</button>
</div>


<!-- <button data-izimodal-open="#modal2" data-izimodal-transitionin="fadeInDown" class="myButton">Delete</button>
 --><button onclick="AreYouSure()" class="myButton">Delete</button>
<div id="modal2" class="modal">
<br>
<label>Id:</label>		
<input type="number" name="Id" id="cusid2" min="1" style="margin-left: 10px;" ><br><br>
<button onclick="AreYouSure()"  class="myButton" style="float: right; margin-right: 18px;" >delete</button>

</div>

<div id="bg-modal" class="bg-modal" >
	<div class="modal-contentes">
		<div class="dialogtitle">
		<h4 style="display: inline-block; margin:10px; font-size: 15px; font-weight: 400; font-family: 'Lato',Arial; color: #fff;">Are you sure</h4>
		<div class="circle"><div onclick="closedialoq()" id="close" class="close" >+</div></div>	
		
		</div>
		
		<div class="surebutton">
		<button onclick="DeleteRow()">Yes</button>
		<button onclick="closedialoq()">No</button>	
		</div>
		
	</div>
	
</div>

 
<script type="text/javascript">
	
$(function () {
		
		 $ (".modal").iziModal({

		 	title: "Melumatlari daxil edin",
		 	overlayClose: false,
		 	radius: 10,
		 	padding: 10

		 });

	});

function addRow() 
{	




	var n1 = document.getElementById("custable").rows.length;
	var i=1;
	var gathering = 1; 
	var fname = document.getElementById('fname').value;
	var lname = document.getElementById('lname').value;
	var age = document.getElementById('age').value;

	if (fname.length && lname.length && age.length >=1) 
{


	var table = document.getElementsByTagName('table')[0];
	for(i=1; i<n1;i++){
 
   	var x = document.getElementById("custable").rows[i].cells[0].innerHTML;
   		
}
	var id = parseInt(x) + gathering;
	var newRow = table.insertRow(table.rows.length);
	var cel1 = newRow.insertCell(0);
	var cel2 = newRow.insertCell(1);
	var cel3 = newRow.insertCell(2);
	var cel4 = newRow.insertCell(3);

	cel1.innerHTML = id;
	cel2.innerHTML = fname;
	cel3.innerHTML = lname;
	cel4.innerHTML = age;

document.getElementsByTagName('tr')[n1].setAttribute("onclick", 'clickme(this)' );

	document.getElementById('fname').value = '';
	document.getElementById('lname').value = '';
	document.getElementById('age').value = '';

}

else{
	alert("Please input value");
}	

}


function CheckCehange(){

if (SendId >=1) {
	console.log(SendId);
	

	$(function () {
		 $ (".modal1").iziModal({

		 	title: "Melumatlari daxil edin",
		 	overlayClose: false,
		 	radius: 10,
		 	padding: 10
		 });

	});
	
}

else{
	SendId = 0;
	console.log(SendId);
	alert("Please select row");
	 // document.getElementById('modal1').setAttribute("style", "display: none;");
	
}

}


function ChangeRow(){
	var n1 = document.getElementById("custable").rows.length;
	var id = SendId;
	var i=1;
	var countRow = 0;
	var fname = document.getElementById('fname1').value;
	var lname = document.getElementById('lname1').value;
	var age = document.getElementById('age1').value;

if (id.length && fname.length && lname.length && age.length >=1) 
{
	var table = document.getElementsByTagName('table')[0];

		for(i=1; i<n1;i++){
   	var x = document.getElementById("custable").rows[i].cells[0].innerHTML;
   	countRow = countRow + 1;
   	console.log(countRow);
   	console.log(x);
   	console.log(id);
	
	if (id==x) {
	var deleteRow = table.deleteRow(countRow);
	var newRow = table.insertRow(countRow);
	break;
}

}
	var cel1 = newRow.insertCell(0);
	var cel2 = newRow.insertCell(1);
	var cel3 = newRow.insertCell(2);
	var cel4 = newRow.insertCell(3);

	cel1.innerHTML = id;
	cel2.innerHTML = fname;
	cel3.innerHTML = lname;
	cel4.innerHTML = age;

	document.getElementsByTagName('tr')[countRow].setAttribute("onclick", 'clickme(this)' );

	document.getElementById('fname1').value = '';
	document.getElementById('lname1').value = '';
	document.getElementById('age1').value = '';

	SendId = 0;
}

else{
	alert("Please input value");
}	

}



</script>

<script type="text/javascript">
var SendId = 0;
var check = 0;
function clickme(row){

	var table = document.getElementById('custable');
	var rowstable = table.rows.length;
	
	
	var i = 0;

	for (i=1; i<rowstable; i++){

		table.getElementsByTagName('tr')[i].classList.remove("main");
		SendId = 0;
	}

var tabtr = row.rowIndex;


console.log(check);

if (check == tabtr) {
table.getElementsByTagName('tr')[tabtr].classList.remove("main");
SendId = 0;

}

else{

table.getElementsByTagName('tr')[tabtr].classList.add("main");
var Idtab = document.getElementById("custable").rows[tabtr].cells[0].innerHTML;
SendId = Idtab;
console.log(Idtab,SendId);
}

if(check == tabtr){

	check = 0;
	}
else{
check = tabtr;
	}

}








function AreYouSure(){
var id = SendId;
console.log(id);
if (id >= 1) {

document.getElementById('bg-modal').style.display = 'flex';
}
else{

	alert('Please select row');
}	

}

function closedialoq(){

	document.getElementById('bg-modal').style.display = 'none';
}

function DeleteRow(){
	var n1 = document.getElementById("custable").rows.length;
	var i=1;
	var countRow = 0;
	var id = SendId;

	

	var table = document.getElementsByTagName('table')[0];

	for(i=1; i<n1;i++){

   	var x = document.getElementById("custable").rows[i].cells[0].innerHTML;
   	countRow = countRow + 1;
   	console.log(countRow);
   	console.log(x);
   	console.log(id);
	
	if (id==x) {
 
	var deleteRow = table.deleteRow(countRow);
	document.getElementById('bg-modal').style.display = 'none';
	SendId = 0;
	break;
}
}

}





</script>


<script type="text/javascript">
	function myFunction(){
	var rows = document.getElementById("custable").rows.length;
	var i = 1;

	for(i=1; i<rows; i++){

document.getElementsByTagName('tr')[i].setAttribute("onclick", 'clickme(this)' );
}
}
</script>



<table  id="custable"  style="width:100%">
	<thead>
	  <tr >
	    <th>ID</th>
	    <th>Firstname</th>
	    <th>Lastname</th>
	    <th>Age</th>
	  </tr>
	</thead>
	<tbody>
	   <tr>
	    <td>1</td>
	    <td>Nihad</td>
	    <td>Abdulla</td>
	    <td>20</td>
	  </tr>
	  <tr>
	    <td>2</td>
	    <td>Abdulla</td>
	    <td>Abdullayev</td>
	    <td>19</td>
	  </tr>
	</tbody>
</table>


</body>
</html>
